# OpenRouter API key for accessing multiple LLM models
# Get your API key from: https://openrouter.ai/keys
OPENROUTER_API_KEY=your_openrouter_api_key_here

# Proxy server port (default: 3456)
PROXY_PORT=3456

# Model mappings via OpenRouter (DO NOT CHANGE unless you know what you're doing)
# k1: anthropic/claude-opus-4.1 - Architecture and system design
# k2: openai/gpt-5-chat - Testing strategies and debugging
# k3: qwen/qwen3-max - Algorithm optimization
# k4: google/gemini-2.5-pro - Integration and completeness

# Debate timeout in minutes (default: 60)
DEBATE_TIMEOUT_MINUTES=60

# ============================================================================
# RETRY CONFIGURATION
# ============================================================================

# Maximum number of retry attempts for failed operations (default: 3)
MAX_RETRIES=3

# Initial delay between retry attempts in milliseconds (default: 1000 = 1 second)
INITIAL_RETRY_DELAY=1000

# Maximum delay between retry attempts in milliseconds (default: 30000 = 30 seconds)
MAX_RETRY_DELAY=30000

# Exponential backoff multiplier (default: 2.0)
BACKOFF_MULTIPLIER=2

# Progress Reporting Configuration
# Enable/disable progress reporting (default: true)
DEBATE_PROGRESS_ENABLED=true

# Heartbeat interval in milliseconds (default: 30000 = 30 seconds)
DEBATE_PROGRESS_INTERVAL=30000

# Verbose mode for detailed model status updates (default: false)
DEBATE_PROGRESS_VERBOSE=false

# Iterative Debate Configuration
# Maximum number of debate iterations (default: 5)
MAX_DEBATE_ITERATIONS=5

# Consensus threshold percentage for early exit (default: 90)
CONSENSUS_THRESHOLD=90

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================

# Request Signing (HMAC-SHA256)
# Enable/disable request signature validation (default: true)
ENABLE_REQUEST_SIGNING=true

# Signature validity window in seconds (default: 300 = 5 minutes)
# This prevents replay attacks by rejecting old requests
SIGNATURE_VALIDITY_WINDOW=300

# HMAC secret for request signing (auto-generated if not provided)
# Generate a secure secret: openssl rand -hex 64
# IMPORTANT: Keep this secret secure and never share it
HMAC_SECRET=your_hmac_secret_here_64_chars_minimum_for_security

# Sign outgoing requests to OpenRouter (default: false)
# Enable this for enhanced security but may cause compatibility issues
SIGN_OUTGOING_REQUESTS=false

# Rate Limiting Configuration
# Maximum requests per window (default: 10 for general, 100 for proxy)
RATE_LIMIT_MAX_REQUESTS=10

# Rate limiting window in milliseconds (default: 60000 = 1 minute)
RATE_LIMIT_WINDOW_MS=60000

# Security Headers
# Automatically applied security headers are enabled by default
# These include HSTS, CSP, X-Frame-Options, etc.

# Security Audit Logging
# Enhanced logging of security events and suspicious activity
# Enabled by default, logs to console

# ============================================================================
# BACKWARD COMPATIBILITY SETTINGS
# ============================================================================

# Disable request signing for gradual rollout (set to false to disable)
# This allows existing clients to continue working without signatures
# ENABLE_REQUEST_SIGNING=false

# ============================================================================
# PRODUCTION SECURITY RECOMMENDATIONS
# ============================================================================

# For production deployments:
# 1. Set ENABLE_REQUEST_SIGNING=true
# 2. Generate a strong HMAC_SECRET (64+ characters)
# 3. Set SIGNATURE_VALIDITY_WINDOW=300 (5 minutes max)
# 4. Monitor logs for security events
# 5. Use HTTPS/TLS in production (handled by reverse proxy)
# 6. Configure proper rate limits based on usage patterns
# 7. Consider enabling SIGN_OUTGOING_REQUESTS=true for maximum security

# ============================================================================
# DEBUGGING AND MONITORING
# ============================================================================

# Debug mode for security module (logs detailed security events)
SECURITY_DEBUG=false

# Telemetry and monitoring
TELEMETRY_DISABLED=false

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================

# Log level: error, warn, info, debug (default: auto-detected based on NODE_ENV)
# - test: error (minimal noise during tests)
# - development: debug (verbose logging)
# - production: info (balanced logging)
LOG_LEVEL=info

# Enable/disable file logging (default: true, disabled in test mode)
# Set to 'false' to disable file output (console only)
LOG_FILE=true

# Log file location is automatically set to ./logs/
# Files created:
# - combined.log (all logs, max 10MB, 5 files rotation)
# - error.log (errors only, max 10MB, 5 files rotation)